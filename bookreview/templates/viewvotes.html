{% extends 'base.html' %}
{% block content %}
<div class="container">
<div class="row row-flex">
    <div class="col-xs-12 container title">

        <!--page heading-->
        <h2 class="page-heading">Book Of The Month Current Standings</h2>
    </div>

    <!--panels used to display the objects in bookreview using the voting variable -->
    {% for bookreview in voting %}

        <!--only displays books that have 'yes' selected in active, can be changed by site admin while allowing data to be kept-->
        {% if bookreview.active == "yes" %}
        <div class="col-xs-10 col-xs-offset-1 col-sm-offset-0 col-sm-6 col-md-4 panel panel-default text-center">
            <div class="panel-heading panel-heading-custom"><h4 class="product-title">{{ bookreview.bookname }}</h4></div>
            <div class="panel-body panel-viewvotes">
                <div class="product" style="background-image: url('{{ MEDIA_URL }}{{ bookreview.bookimage }}')"></div>
                <p>By: {{ bookreview.bookauthor }}</p>
                <p>Authors Comments: {{ bookreview.authorscomments }}</p>
            </div>
            <div class="panel-footer panel-footer-custom">
            
                <!--counts number of comments attributed to each book-->
                <h4 class="panel-footer-custom">Current Votes: {{ bookreview.num_votes }}</h4>
            </div>  
        </div>
        {% endif %}
    {% endfor %}

    <!--displays users name, book selection and comments-->
    <div class="col-xs-12 container title">
        <h3 class="page-heading">See what people are saying about this months selection</h3>
    </div>
    {% for uservote in viewvote %}
    <div class="panel-body col-xs-12 comment-box">
        <p>{{ uservote.loggeduser }}</p>
        <p>{{ uservote.book }}</p>
        <p>{{ uservote.comment }}</p>
        <p>{{ uservote.book.bookauthor }}</p>
    </div>    
    {% endfor %} 
</div> 
</div>
{% endblock %}